<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Animation Laine</title>
<style>
html, body {
  margin:0; padding:0; overflow:hidden; height:100%;
  font-family: Arial, sans-serif;
  background: #000;
}

canvas {
  display:block;
}

.collage-border {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  z-index:5;
  overflow:hidden;
}

.collage-border img {
  position:absolute;
  object-fit:cover;
  opacity:0.7;
  border-radius:6px;
  box-shadow:0 0 6px rgba(0,0,0,0.2);
}

h1 {
  position:absolute;
  top:10%;
  left:50%;
  transform:translateX(-50%);
  color:#fff;
  font-size:3em;
  z-index:10;
  text-align:center;
}
</style>
</head>
<body>
<h1>ðŸŽ‰ Happy Birthday Laine! ðŸŽ‰</h1>
<canvas id="canvas"></canvas>
<div class="collage-border" id="collageBorder"></div>

<script>
// Canvas
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// Pixelated sunset background
function drawPixelSunset() {
  const pixelSize=8;
  for(let y=0;y<canvas.height;y+=pixelSize){
    for(let x=0;x<canvas.width;x+=pixelSize){
      let r=Math.floor(255 - (y/canvas.height)*100 + Math.random()*20);
      let g=Math.floor(100 + (y/canvas.height)*100 + Math.random()*20);
      let b=Math.floor(50 + (y/canvas.height)*50 + Math.random()*20);
      ctx.fillStyle=`rgb(${r},${g},${b})`;
      ctx.fillRect(x,y,pixelSize,pixelSize);
    }
  }
  // simple clouds
  for(let i=0;i<20;i++){
    ctx.fillStyle=`rgba(255,255,255,${Math.random()*0.3})`;
    let w=50+Math.random()*100;
    let h=20+Math.random()*40;
    ctx.beginPath();
    ctx.ellipse(Math.random()*canvas.width, Math.random()*canvas.height/2, w, h, 0, 0, Math.PI*2);
    ctx.fill();
  }
}

// Pill class
class Pill {
  constructor(){
    this.reset();
  }
  reset(){
    this.x=Math.random()*canvas.width;
    this.y=Math.random()*-canvas.height;
    this.width=10+Math.random()*20;
    this.height=this.width/3;
    this.color=`hsl(${Math.random()*360},50%,40%)`;
    this.speed=1+Math.random()*2;
    this.angle=Math.random()*Math.PI*2;
    this.angularSpeed=Math.random()*0.05-0.025;
    this.target=null;
  }
  update(t){
    // swirl movement
    const dx=0.5*(Math.random()-0.5);
    const dy=this.speed;
    this.x+=dx;
    this.y+=dy;
    this.angle+=this.angularSpeed;

    // move to target if set
    if(this.target){
      this.x+=(this.target.x-this.x)*0.05;
      this.y+=(this.target.y-this.y)*0.05;
    }

    if(this.y>canvas.height+this.height) this.reset();
  }
  draw(ctx){
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.angle);
    ctx.fillStyle=this.color;
    ctx.fillRect(-this.width/2,-this.height/2,this.width,this.height);
    ctx.restore();
  }
}

// Generate pills
const pills=[];
for(let i=0;i<250;i++) pills.push(new Pill());

// Create text map function
function createTextMap(text,font='Arial',fontSize=120){
  const offscreen=document.createElement('canvas');
  const ctxOff=offscreen.getContext('2d');
  offscreen.width=canvas.width;
  offscreen.height=canvas.height;
  ctxOff.font=`${fontSize}px ${font}`;
  ctxOff.fillStyle='white';
  ctxOff.textAlign='center';
  ctxOff.textBaseline='middle';
  ctxOff.fillText(text,canvas.width/2,canvas.height/2);
  return ctxOff.getImageData(0,0,offscreen.width,offscreen.height);
}

let textMap1=createTextMap("Laine");
let textMap2=createTextMap("It is your birthday. I love you.", "Arial",80);
let showSecondText=false;
setTimeout(()=>{showSecondText=true;},4000);

// Animation loop
let time=0;
function animate(){
  drawPixelSunset();
  time++;
  const map=showSecondText?textMap2:textMap1;

  pills.forEach(pill=>{
    // randomly pick pixel to align to
    if(Math.random()<0.05){
      const tx=Math.floor(Math.random()*map.width);
      const ty=Math.floor(Math.random()*map.height);
      const index=(ty*map.width + tx)*4+3;
      if(map.data[index]>128){
        pill.target={x:tx, y:ty};
      } else {
        pill.target=null;
      }
    }
    pill.update(time);
    pill.draw(ctx);
  });

  requestAnimationFrame(animate);
}
animate();

// Collage border
const collageContainer=document.getElementById("collageBorder");
const stockPhotos=[
  "https://cdn.pixabay.com/photo/2016/11/18/13/28/business-1839876_1280.jpg",
  "https://cdn.pixabay.com/photo/2017/08/10/03/53/team-2617505_1280.jpg",
  "https://cdn.pixabay.com/photo/2018/02/02/15/59/startup-3125712_1280.jpg",
  "https://cdn.pixabay.com/photo/2015/03/26/10/03/business-690048_1280.jpg",
  "https://cdn.pixabay.com/photo/2019/05/07/15/09/business-4184151_1280.jpg"
];

stockPhotos.forEach((src,i)=>{
  const img=document.createElement("img");
  img.src=src;
  img.style.width="150px";
  img.style.height="100px";
  const side=i%4;
  const offset=20+Math.random()*100;
  switch(side){
    case 0: img.style.top=`${offset}px`; img.style.left=`${offset}px`; img.style.transform=`rotate(${Math.random()*15-7}deg)`; break;
    case 1: img.style.top=`${offset+50}px`; img.style.right=`${offset}px`; img.style.transform=`rotate(${Math.random()*15-7}deg)`; break;
    case 2: img.style.bottom=`${offset}px`; img.style.left=`${offset+50}px`; img.style.transform=`rotate(${Math.random()*15-7}deg)`; break;
    case 3: img.style.top=`${offset+150}px`; img.style.left=`${offset/2}px`; img.style.transform=`rotate(${Math.random()*15-7}deg)`; break;
  }
  collageContainer.appendChild(img);
});

// Handle resize
window.addEventListener('resize',()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  textMap1=createTextMap("Laine");
  textMap2=createTextMap("It is your birthday. I love you.","Arial",80);
});
</script>
</body>
</html>
